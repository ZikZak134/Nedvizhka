# ü¶Ö Gemini Agent Protocol: EstateAnalytics (Nedvizhka)

–§–∞–π–ª: **`.agent/gemini.md`**
–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI-–∞–≥–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º.**

---

## ‚≠êÔ∏è –ì–ª–∞–≤–Ω—ã–µ –ü—Ä–∏–Ω—Ü–∏–ø—ã (The "Clean Vibe")

1. **–Ø–∑—ã–∫–æ–≤–æ–π –°—É–≤–µ—Ä–µ–Ω–∏—Ç–µ—Ç**: –í—Å–µ —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏—è, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∏ –æ–±—â–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ‚Äî **—Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ**. –ö–æ–¥ (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ñ—É–Ω–∫—Ü–∏–∏) ‚Äî –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º.
2. **–ë–µ–∑ "–†—ã–±—ã"**: –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç. –ù–∏–∫–∞–∫–æ–≥–æ Lorem Ipsum.
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ö–æ–¥–∞**: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —É–¥–∞–ª—è–µ–º –∫–æ–¥ –±–µ–∑ –≤–µ–¥–æ–º–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ò—Å–ø–æ–ª—å–∑—É–µ–º `render_diffs` –∏–ª–∏ `multi_replace_file_content` –∞–∫–∫—É—Ä–∞—Ç–Ω–æ.
4. **–ê–∫—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è**: –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ–±–Ω–æ–≤–ª—è–µ–º `MEMORY.md`. –ï—Å–ª–∏ –º–µ–Ω—è–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–ª–∏ —Å—Ç–µ–∫ ‚Äî –æ–±–Ω–æ–≤–ª—è–µ–º —ç—Ç–æ—Ç —Ñ–∞–π–ª –∏ `ARCHITECTURE.md`.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –°—Ç–µ–∫

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π `package.json` –∏ `pyproject.toml` –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–π –ª–∏–±.

### Frontend (`apps/web`) -> "Luxury UX"

- **Framework**: **Next.js 16+** (App Router, Server Actions).
- **Core**: React 19, TypeScript (Strict Mode).
- **Styling**: TailwindCSS 3.4+. –ò—Å–ø–æ–ª—å–∑—É–µ–º CSS Variables (`globals.css`) –¥–ª—è –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º—ã.
- **Maps**: MapLibre GL JS, Leaflet, Deck.gl, 2GIS API Integration.
- **Animations**: Framer Motion (–¥–ª—è "premium" –º–∏–∫—Ä–æ-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π).
- **UI Components**: Shadcn/ui-like (Radix UI primitives), `class-variance-authority`.
- **Icons**: Lucide React.
- **State Management**: React Hooks.

### Backend (`apps/api`) -> "Robust API"

- **Framework**: **FastAPI** 0.115+.
- **Language**: Python 3.12+.
- **Database**: PostgreSQL (Production) / SQLite (Dev).
- **ORM**: SQLAlchemy 2.0+ (Async).
- **Migrations**: Alembic.
- **Validation**: Pydantic v2.
- **Background Tasks**: Celery + Redis.
- **Logging**: Structlog (JSON logs).
- **Testing**: Pytest, Pytest-Asyncio.
- **Linting**: Ruff (–∑–∞–º–µ–Ω—è–µ—Ç Black, Isort, Flake8).

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞ (–ì–¥–µ —á—Ç–æ –ª–µ–∂–∏—Ç)

–ö–æ—Ä–µ–Ω—å: `c:\Users\grama\OneDrive\Docs\Nedvizhka\`

| –ü—É—Ç—å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- |
| **`.agent/`** | –ú–æ–∑–≥ –ø—Ä–æ–µ–∫—Ç–∞. –ü—Ä–∞–≤–∏–ª–∞ (`rules/`), –ø–∞–º—è—Ç—å (`MEMORY.md`), –≤–æ—Ä–∫—Ñ–ª–æ—É (`workflows/`). |
| **`apps/api/`** | –ë—ç–∫–µ–Ω–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: `app/main.py`. –†–æ—É—Ç—ã: `app/api/v1/`. |
| **`apps/web/`** | –§—Ä–æ–Ω—Ç–µ–Ω–¥ Next.js. –°—Ç—Ä–∞–Ω–∏—Ü—ã: `app/`. –ê–¥–º–∏–Ω–∫–∞: `app/admin/`. |
| **`docker-compose.yml`** | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ (–ë–î, –†–µ–¥–∏—Å, –ë—ç–∫, –§—Ä–æ–Ω—Ç). |
| **`manage.ps1`** | **–ì–ª–∞–≤–Ω—ã–π —Å–∫—Ä–∏–ø—Ç** —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Windows/PowerShell). –ó–∞–ø—É—Å–∫, —Ç–µ—Å—Ç—ã, –º–∏–≥—Ä–∞—Ü–∏–∏. |
| **`estate_analytics.db`** | –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î (SQLite) –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–µ—Å–ª–∏ –Ω–µ –ø–æ–¥–Ω—è—Ç Postgres –≤ Docker). |

---

## üé® –î–∏–∑–∞–π–Ω –∏ –°—Ç–∏–ª—å (Code & Visual)

### Code Style

- **Python**: PEP 8, Type Hints –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã. Docstrings –≤ Google Style –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.
- **TypeScript**: –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã. PascalCase –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, camelCase –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π.
- **Commits**: Conventional Commits (`feat:`, `fix:`, `docs:`, `chore:`).

### Visual Style ("Quiet Luxury")

- **–¶–≤–µ—Ç–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω—ã –∏–∑ `globals.css` / `admin.module.css`. –¢–µ–º–Ω–æ-—Å–∏–Ω–∏–π (`#0a1128`) + –ó–æ–ª–æ—Ç–æ.
- **–ê–Ω–∏–º–∞—Ü–∏–∏**: –ü–ª–∞–≤–Ω—ã–µ, –¥–æ—Ä–æ–≥–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã (View Transitions, Scroll-driven).
- **–û—Ç—Å—Ç—É–ø—ã**: –©–µ–¥—Ä—ã–µ –æ—Ç—Å—Ç—É–ø—ã –¥–ª—è "–≤–æ–∑–¥—É—Ö–∞".
- **Typography**: Playfair Display (–∑–∞–≥–æ–ª–æ–≤–∫–∏), Inter (—Ç–µ–∫—Å—Ç).

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ (Workflow)

1. **–°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã**:
    - –û–ø–∏—Å–∞—Ç—å Pydantic —Å—Ö–µ–º—É –≤ `apps/api/app/schemas/`.
    - –û–ø–∏—Å–∞—Ç—å SQLAlchemy –º–æ–¥–µ–ª—å –≤ `apps/api/app/models/`.
2. **–ú–∏–≥—Ä–∞—Ü–∏–∏**:
    - `cd apps/api`
    - `alembic revision --autogenerate -m "feat: add user profile"`
    - `alembic upgrade head`
3. **API**:
    - –°–æ–∑–¥–∞—Ç—å endpoint –≤ `apps/api/app/api/v1/`.
    - –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –≤ `apps/api/tests/`.
4. **Frontend**:
    - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø—ã (–∏–ª–∏ –æ–ø–∏—Å–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã).
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `fetch` –∏–ª–∏ API-–∫–ª–∏–µ–Ω—Ç.
5. **Data Seeding**:
    - –î–ª—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `apps/api/app/api/v1/seed.py`.
    - –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `curl -X POST http://localhost:8000/api/v1/seed`.

---

## üöÄ –ö–∞–∫ –Ω–µ —Å–ª–æ–º–∞—Ç—å –ø—Ä–æ–µ–∫—Ç (Checklist)

–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ —Å–∫–∞–∑–∞—Ç—å "–Ø –∑–∞–∫–æ–Ω—á–∏–ª":

1. **–ü—Ä–æ–≤–µ—Ä—å –±–∏–ª–¥**: –ó–∞–ø—É—Å—Ç–∏ `managed.ps1 api-dev` –∏ `manage.ps1 web-dev`.
2. **–õ–∏–Ω—Ç–µ—Ä—ã**: –ó–∞–ø—É—Å—Ç–∏ `manage.ps1 verify` (–æ–Ω –ø—Ä–æ–≥–æ–Ω–∏—Ç –≤—Å—ë: ruff, mypy, pytest, eslint).
3. **–¢–µ—Å—Ç—ã**: –ï—Å–ª–∏ —Ç—Ä–æ–≥–∞–ª –ª–æ–≥–∏–∫—É, –∑–∞–ø—É—Å—Ç–∏ `pytest`.
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
    - –û–±–Ω–æ–≤–∏–ª `MEMORY.md`? (–†–∞–∑–¥–µ–ª "–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ", "–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π").
    - –û–±–Ω–æ–≤–∏–ª `task.md`?
    - –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª –Ω–æ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è ‚Äî –¥–æ–±–∞–≤—å –≤ `.env.example` –∏ `ARCHITECTURE.md`.

---

## üí° –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –æ—Ç Antigravity

- **–ü–∞–º—è—Ç—å**: –§–∞–π–ª `MEMORY.md` –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω. –ß–∏—Ç–∞–π –µ–≥–æ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ª—é–±–æ–π –∑–∞–¥–∞—á–∏, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç.
- **–ê–≤—Ç–æ–Ω–æ–º–∏—è**: –ï—Å–ª–∏ –≤–∏–¥–∏—à—å –º–µ–ª–∫—É—é –æ—à–∏–±–∫—É (–æ–ø–µ—á–∞—Ç–∫—É, –±–∞–≥ —Å—Ç–∏–ª–µ–π) ‚Äî –∏—Å–ø—Ä–∞–≤—å –ø–æ–ø—É—Ç–Ω–æ.
- **–î–ï–ü–õ–û–ô**: –Ø –º–æ–≥—É —Å–∞–º –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä. –ö–ª—é—á–∏ –ª–µ–∂–∞—Ç –≤ `.agent/keys/vm_key`. –ò—Å–ø–æ–ª—å–∑—É–π `ssh` –≤–æ—Ä–∫—Ñ–ª–æ—É, –Ω–µ –ø—Ä–æ—Å–∏ —é–∑–µ—Ä–∞.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**: –ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º 2GIS API –¥–ª—è –≥–µ–æ–∫–æ–¥–∏–Ω–≥–∞. –ö–ª—é—á–∏ –ª–µ–∂–∞—Ç –≤ `.env`. –ù–µ —Å–≤–µ—Ç–∏ –∏—Ö –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞—Ö.
- **–î–∏—Å—Ç—Ä–∏–±—É—Ü–∏—è**: Web –¥–µ–ø–ª–æ–∏—Ç—Å—è –Ω–∞ Vercel, API –Ω–∞ Render. –£—á–∏—Ç—ã–≤–∞–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Serverless (cold starts, stateless).
