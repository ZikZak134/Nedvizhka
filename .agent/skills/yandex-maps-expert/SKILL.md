---
name: yandex-maps-expert
description: Expert guidance for implementing Yandex Maps in propert, including limit management, compliance, and custom markers.
---

# Yandex Maps Expert

–≠—Ç–æ—Ç –Ω–∞–≤—ã–∫ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—É –ø–æ —Ä–∞–±–æ—Ç–µ —Å **Yandex Maps API 3.0** (–∏ 2.1) –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –ø—Ä–∏ –ª—é–±—ã—Ö –∑–∞–¥–∞—á–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–∞—Ä—Ç–æ–π, –≥–µ–æ–∫–æ–¥–∏–Ω–≥–æ–º –∏–ª–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤.

## ‚ö†Ô∏è Critical Compliance Rules (–°—Ç—Ä–æ–≥–æ)

1. **Attribution (–ê—Ç—Ä–∏–±—É—Ü–∏—è)**:
    * –õ–æ–≥–æ—Ç–∏–ø –Ø–Ω–¥–µ–∫—Å–∞ **–æ–±—è–∑–∞–Ω** –±—ã—Ç—å –≤–∏–¥–µ–Ω –Ω–∞ –∫–∞—Ä—Ç–µ. –°–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ CSS `display: none` –∏–ª–∏ `opacity: 0` –∑–∞–ø—Ä–µ—â–µ–Ω–æ.
    * –°—Å—ã–ª–∫–∞ "–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è" (Terms of Use) –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞ –∏ –≤–∏–¥–Ω–∞.
2. **Data Caching (–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)**:
    * –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≥–µ–æ–∫–æ–¥–µ—Ä–∞ –∏–ª–∏ —Ç–∞–π–ª–æ–≤ –±–æ–ª–µ–µ —á–µ–º –Ω–∞ **30 –¥–Ω–µ–π**.
3. **Public Access**:
    * –ö–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–π —á–∞—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.

## üìä API Limits & Quotas

* **HTTP Geocoder**: < 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ).
  * *–°—Ç—Ä–∞—Ç–µ–≥–∏—è*: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (search-as-you-type).
* **JS API**: < 25000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å—É—Ç–∫–∏.
  * *–°—Ç—Ä–∞—Ç–µ–≥–∏—è*: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
* **Tiles**: < 40 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É.

## üé® UI/UX & Flagpoles

–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º **Custom Flagpoles** (–§–ª–∞–≥—à—Ç–æ–∫–∏):

### Design Requirements

* –í–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø–∏–Ω–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ–º HTML-–º–∞—Ä–∫–µ—Ä—ã (DivIcon / HTML Layout).
* –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:
  * **–¶–µ–Ω–∞**: –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "12.5M").
  * **–°—Ç–∏–ª—å**: "Luxury" (—Ç–µ–º–Ω—ã–π —Ñ–æ–Ω, –∑–æ–ª–æ—Ç–æ–π/–±–µ–ª—ã–π —Ç–µ–∫—Å—Ç, —Ç–æ–Ω–∫–∞—è —Ç–µ–Ω—å).
* **Interactivity**:
  * **Hover**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ Z-index, –ª–µ–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ.
  * **Click**: –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –æ–±—ä–µ–∫—Ç–∞ (Preview Card).

### Technical Implementation Snippets

#### 1. Custom Marker (React/YMaps 3.0)

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤—Ä–∞–ø–ø–µ—Ä–∞ `@pbe/react-yandex-maps` –∏–ª–∏ –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ `ymaps3`:

```javascript
// –ü—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫–∏ –¥–ª—è –º–∞—Ä–∫–µ—Ä–∞
const MarkerContent = ({ price, isHovered }) => (
  <div style={{
    background: '#0F172A', // Navy Dark
    color: '#F8FAFC',
    border: '1px solid #D4AF37', // Gold border
    padding: '4px 8px',
    borderRadius: '4px',
    transform: isHovered ? 'scale(1.1)' : 'scale(1)',
    transition: 'all 0.2s ease',
    boxShadow: '0 4px 6px rgba(0,0,0,0.3)'
  }}>
    {formatPrice(price)}
  </div>
);
```

#### 2. Backend Geocoding Strategy

–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∞–¥—Ä–µ—Å–∞ –æ–±—ä–µ–∫—Ç–∞ –≤ `FastAPI`:

1. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –≤–≤–æ–¥–∏—Ç –∞–¥—Ä–µ—Å.
2. –ë—ç–∫–µ–Ω–¥ –¥–µ–ª–∞–µ—Ç **–æ–¥–∏–Ω** –∑–∞–ø—Ä–æ—Å –∫ Geocoder API.
3. –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `lat`, `lon` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î (`properties` table).
4. –ö–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—ç–∫–æ–Ω–æ–º–∏—è –ª–∏–º–∏—Ç–æ–≤ HTTP –≥–µ–æ–∫–æ–¥–µ—Ä–∞).

## üõ†Ô∏è Debugging

–ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ –≥—Ä—É–∑–∏—Ç—Å—è:

1. –ü—Ä–æ–≤–µ—Ä—å `apikey` –≤ `.env.local` (`NEXT_PUBLIC_YANDEX_MAP_KEY`).
2. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ `403 Forbidden` (–Ω–µ–≤–µ—Ä–Ω—ã–π –¥–æ–º–µ–Ω/referer).
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—Ç—ã –∏–º–µ–µ—Ç —è–≤–Ω—É—é –≤—ã—Å–æ—Ç—É (`h-[500px]` –∏–ª–∏ `h-full`).
